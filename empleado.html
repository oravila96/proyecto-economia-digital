<!DOCTYPE html>
<html lang="en">

<head>
  <!--=============================================== 
    Template Design By WpFreeware Team.
    Author URI : http://www.wpfreeware.com/
    ====================================================-->

  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>WpF Medinova : Home</title>

  <!-- Mobile Specific Metas
    ================================================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/icon" href="images/favicon.ico" />

  <!-- CSS
    ================================================== -->
  <!-- Bootstrap css file-->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <!-- Font awesome css file-->
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <!-- Default Theme css file -->
  <link id="switcher" href="css/themes/lite-blue-theme.css" rel="stylesheet">
  <!-- Slick slider css file -->
  <link href="css/slick.css" rel="stylesheet">
  <!-- Photo Swipe Image Gallery -->
  <link rel='stylesheet prefetch' href='css/photoswipe.css'>
  <link rel='stylesheet prefetch' href='css/default-skin.css'>

  <!-- Main structure css file -->
  <link href="style.css" rel="stylesheet">

  <!-- Google fonts -->
  <link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Habibi' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cinzel+Decorative:900' rel='stylesheet' type='text/css'>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

  <!-- BEGAIN PRELOADER -->
  <div id="preloader">
    <div id="status">&nbsp;</div>
  </div>
  <!-- END PRELOADER -->

  <!-- SCROLL TOP BUTTON -->
  <a class="scrollToTop" href="#"><i class="fa fa-heartbeat"></i></a>
  <!-- END SCROLL TOP BUTTON -->

  <!--=========== BEGIN HEADER SECTION ================-->
  <header id="header">
    <!-- BEGIN MENU -->
    <div class="menu_area">
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <!-- LOGO -->
            <!-- TEXT BASED LOGO -->
            <a class="navbar-brand" href="index.php"><i class="fa fa-heartbeat"></i><span>Centro Medico</span></a>
            <!-- IMG BASED LOGO  -->
            <!--  <a class="navbar-brand" href="index.html"><img src="images/logo.png" alt="logo"></a>   -->
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul id="top-menu" class="nav navbar-nav navbar-right main-nav">
              <li class="active"><a href="index.php">Inicio</a></li>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Recursos
                  Humanos <span class="fa fa-angle-down"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <!--<li><a href="datospersonales.php">Datos Personales</a></li> -->
                    <li><a href="empleado.php">Empleado</a></li>
                    <li><a href="cargo.php">Cargo</a></li>
                    <li><a href="jornada.php">Jornada</a></li>
                    <li><a href="">Empleado-Cargo</a></li>
                    <li><a href="">Empleado-Jornada</a></li>
                    <li><a href="">Empleado Administrativo</a></li>
                  </ul>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Centro
                  Medico <span class="fa fa-angle-down"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="doctor.php">Doctor</a>
                  <li><a href="">Especialidad</a></li>
                    <li><a href="">Doctor-Especialidad</a></li>
                    <li><a href="">Centro Medico</a></li>
                    <li><a href="">Doctor-Centro</a></li>
                    <li><a href="">Tipo Centro</a></li>
                    <li><a href="">Edificio</a></li>
                    <li><a href="">Sala</a></li>
                    <li><a href="">Tipo Sala</a></li>
                    <li><a href="">Distribucion-Sala</a></li>
                  
                  </li>
                </ul>
              </li>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Consulta <span
                    class="fa fa-angle-down"></span></a>
                    <ul class="dropdown-menu" role="menu">
                    <li><a href="">Consulta</a></li>
                    <li><a href="">Receta</a></li>
                    <li><a href="">Medicamento</a></li>
                    <li><a href="">Sintoma</a></li>
                    <li><a href="">Signo</a></li>
                    <li><a href="">Examen</a></li>                         
                  </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Cita
                  <span class="fa fa-angle-down"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="vistaPacientes.php">Paciente</a></li>
                    <li><a href="">Cita</a></li>
                    <li><a href="">Flujo-Cita</a></li>
                    <li><a href="">Etapa-Cita</a></li>
                    <li><a href="">Requisitos-Cita</a></li>               
                  </ul>
              </li>
              <!--<li><a href="contact.html">Contact</a></li>-->
            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </nav>
    </div>
    <!-- END MENU -->
  </header>
  <!--=========== END HEADER SECTION ================-->
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <section class="section1">
    <div class="container">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-10">
              <h2>Datos Empleado</h2>
            </div>
            <div class="col-sm-2">
              <a href="#" class="btn btn-success" data-toggle="modal" data-target="#agregarempleado"><i class="material-icons"></i> <span>Agregar</span></a>
            </div>
          </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>ID Empleado</th>
              <th></th>
              <th>Nombre</th>
              <th></th>
              <th>identidad</th>
              <th></th>
              <th>Email</th>
              <th></th>
              <th>Fecha Ingreso</th>
              <th></th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tabla">
            <?php
              include_once "conect.php";
              $sql='SELECT * FROM VIEW_INFO_EMPLEADO';
              $resultado=oci_parse($conn,$sql);
              oci_execute($resultado);
              if(!isset($resultado)){
              echo "alert('Ha ocurrido un error')";
              }
              else{
                  while($fila = oci_fetch_array($resultado, OCI_ASSOC)){
                      echo '<tr>
                              <td>'.$fila["IDEMPLEADO"].'</td>
                              <td></td>
                              <td>'.$fila["NOMBRE"].'</td>
                              <td></td>
                              <td>'.$fila["NOIDENTIDAD"].'</td>
                              <td></td>
                              <td>'.$fila["EMAIL"].'</td>
                              <td></td>
                              <td>'.$fila["FECHAINGRESO"].'</td>
                              <td></td>
                              <td>
                                  <a data-toggle="modal" data-target="#modificarempleado" onclick="editarDatos('.$fila["IDEMPLEADO"].')">
                                  <i class="material-icons" data-toggle="tooltip" title="" data-original-title="Edit"></i></a>
                                  <a data-toggle="modal" data-target="#eliminarempleado" onclick="eliminarDatos('.$fila["IDEMPLEADO"].')"><i class="material-icons" data-toggle="tooltip" title="" data-original-title="Delete"></i></a>
                              </td>
                          </tr>';
                  }
              }
            ?>
          </tbody>
        </table>
      </div>

      <!-- Agregar-->
      <div class="modal fade" id="agregarempleado">
        <div class="modal-dialog">
          <div class="modal-content">
            <form>
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel"><b>Agregar Empleado</b></h4>
              </div>
              <div class="modal-body">
                <div class="appointment-area">
                  <form class="appointment-form">
                    <div class="row">
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Numero identidad <span class="required">*</span>
                        </label>
                        <input id="int_identidad" type="Number" name="idEmpleado" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar numero de identidad">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Primer Nombre<span class="required">*</span>
                        </label>
                        <input id="txt_pnombre" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Segundo Nombre<span class="required">*</span>
                        </label>
                        <input id="txt_snombre" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Primer Apellido<span class="required">*</span>
                        </label>
                        <input id="txt_papellido" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Segundo Apellido<span class="required">*</span>
                        </label>
                        <input id="txt_sapellido" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Email<span class="required">*</span>
                        </label>
                        <input id="txt_email" type="text" name="txt_email" class="wp-form-control wpcf7-text"
                          placeholder="Ingrese su email">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Telefono<span class="required">*</span>
                        </label>
                        <input id="txt_telefono" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Fecha Nacimiento <span class="required">*</span>
                        </label>
                        <input id="txt_fecha" type="text" name="fechaIngreso" class="wp-form-control wpcf7-text"
                          placeholder="dd/mm/yy">
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">Direccion<span class="required">*</span>
                        </label>
                        <input id="txt_direccion" type="text" name="idPersona" class="wp-form-control wpcf7-text"
                          placeholder="Ingresar primer nombre">
                      </div>
                    </div>
                  </form>
                </div>
              </div>
              <div class="modal-footer">
                <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancelar">
                <button id="btn_guardar" type="button" class="btn btn-success" data-hover="Agregar" data-dismiss="modal">AGREGAR</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- Modificar-->
      <div class="modal fade" id="modificarempleado">
        <div class="modal-dialog">
          <div class="modal-content">
            <form>
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel"><b>Modificar Empleado</b></h4>
              </div>
              <input type="hidden" name="" id="idPaciente2">
              <div class="modal-body" id="modalModificar">


              </div>
              <div class="modal-footer">
                <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancelar">
                <button type="button" class="btn btn-warning" data-dismiss="modal" id="actualizar">Actualizar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- Eliminar-->
      <div class="modal fade" id="eliminarempleado">
        <div class="modal-dialog">
          <div class="modal-content">
            <form>
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel"><b>Eliminar Empleado</b></h4>
              </div>
              <input type="hidden" name="" id="idPaciente3">
              <div class="modal-body">
                <div class="appointment-area">
                  <form class="appointment-form">
                    <div class="row">
                      <div class="col-md-6 col-sm-6">
                        <label class="control-label">¿Desea eliminar este registro?
                        </label>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
              <div class="modal-footer">
                <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancelar">
                <button type="button" class="btn btn-danger" data-dismiss="modal" id="eliminar">Eliminar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
  </section>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>

  <!--=========== Start Footer SECTION ================-->
  <div class="footer-middle">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="footer-copyright">
            <p>© Copyright 2019 <a href="index.php">Centro Medico</a></p>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="footer-social">
            <a href="#"><span class="fa fa-facebook"></span></a>
            <a href="#"><span class="fa fa-twitter"></span></a>
            <a href="#"><span class="fa fa-google-plus"></span></a>
            <a href="#"><span class="fa fa-linkedin"></span></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--=========== End Footer SECTION ================-->

  <!-- jQuery Library  -->
  <script src="js/jquery.js"></script>
  <!-- Bootstrap default js -->
  <script src="js/bootstrap.min.js"></script>
  <!-- slick slider -->
  <script src="js/slick.min.js"></script>
  <script type="text/javascript" src="js/modernizr.custom.79639.js"></script>
  <!-- counter -->
  <script src="js/waypoints.min.js"></script>
  <script src="js/jquery.counterup.min.js"></script>
  <!-- Doctors hover effect -->
  <script src="js/snap.svg-min.js"></script>
  <script src="js/hovers.js"></script>
  <!-- Photo Swipe Gallery Slider -->
  <script src='js/photoswipe.min.js'></script>
  <script src='js/photoswipe-ui-default.min.js'></script>
  <script src="js/photoswipe-gallery.js"></script>

  <!-- Custom JS -->
  <script src="js/custom.js"></script>
  <!-- js de index -->
  <script src="js/empleado.js"></script>
  <script>
  /*Funcion que se activa al darle click al boton de editar
      Funcionlidad: Obtiene el el idPaciente para poder llenar el formulario con los valores actuales*/
      function editarDatos(id){
        $('#idPaciente2').val(id);
        $.ajax({
          url: "ajax/ingresarEmpleado.php?accion=1",
          data: 'idPaciente='+$('#idPaciente2').val(),
          method: "POST",
          success:function(respuesta){
            $("#modalModificar").html(respuesta);
            console.log(respuesta);
          }
        });
      }
      /*Funcion que se ejecuta cuando se presiona el boton actualizar al momento de editar un paciente*/
      $('#actualizar').click(function(){
        var parametros =  "idPaciente="+$('#idPaciente2').val()+
                          "&int_identidad="+$("#identidad").val() +
                          "&txt_pnombre="+$("#pnombre").val() +
                          "&txt_snombre="+$("#snombre").val() +
                          "&txt_papellido="+$("#papellido").val() +
                          "&txt_sapellido="+$("#sapellido").val() +
                          "&txt_email="+$("#email").val() +
                          "&txt_telefono="+$("#telefono").val() +
                          "&txt_fecha="+$("#fecha").val() +
                          "&txt_direccion="+$("#direccion").val();
                          console.log(parametros);
        $.ajax({
            url: "ajax/ingresarEmpleado.php?accion=3",
            method: "POST",
            data: parametros,  
            success: function (resultado) {
                  $('#tabla').load('ajax/tablaEmpleados.php');
                  alert(resultado);
            }
        });
      });
      /*Funcion que se ejecuta cuando se presiona el boton eliminar al momento de borrar un paciente*/
      /*Eliminar*/
      function eliminarDatos(id){
        $('#idPaciente3').val(id);
      }
      $('#eliminar').click(function(){
        $.ajax({
            url: "ajax/ingresarEmpleado.php?accion=4",
            method: "POST",
            data: "idPaciente="+$('#idPaciente3').val(),
            success: function (resultado) {
                  $('#tabla').load('ajax/tablaEmpleados.php');
                  alert(resultado);
            }
        });
      });
      
  </script>
</body>

</html>